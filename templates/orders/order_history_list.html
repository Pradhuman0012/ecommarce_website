{% extends "base.html" %}
{% block title %}Order History{% endblock %}

{% block styleblock %}
.stats-card { background: var(--bg-card); border-left: 4px solid var(--accent); }
.order-id { color: var(--accent); font-family: monospace; }
.theme-table tr:hover { background: var(--bg-soft) !important; }
{% endblock %}

{% block body %}
<div class="container-fluid px-4 py-4">

  <div class="d-flex justify-content-between align-items-center mb-4">
    <h3 class="fw-bold mb-0">Order History</h3>
    <input type="text" id="searchInput" class="form-control w-25" placeholder="Search orders...">
  </div>

  <div class="card shadow-sm border-0">
    <div class="table-responsive">
      <table class="table theme-table align-middle mb-0" id="orderTable">
        <thead>
          <tr>
            <th class="ps-4">ID & Bill</th>
            <th>Customer</th>
            <th class="text-center">Mode</th>
            <th class="text-end">Total</th>
            <th>Created</th>
            <th class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for order in orders %}
          <tr>
            <td class="ps-4"><span class="order-id fw-bold">#{{ order.id }}</span></td>
            <td><div class="fw-bold">{{ order.customer_name }}</div></td>
            <td class="text-center"><span class="badge bg-soft-primary text-primary border">{{ order.bill.payment_mode }}</span></td>
            <td class="text-end fw-bold" data-amount="{{ order.bill.total_amount|floatformat:2 }}">â‚¹ {{ order.bill.total_amount|floatformat:2 }}</td>
            <td>{{ order.created_at|date:"d M, h:i A" }}</td>
            <td class="text-center">
              <a href="{% url 'orders:order_history' order.id %}" class="btn btn-sm btn-outline-secondary">View</a>
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
